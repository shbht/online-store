{"version":3,"sources":["../../lib/middleware/mwErrorHandler.es6"],"names":["mwErrorHandler","err","req","res","next","domain","console","log","stack","constructor","name","status","statusCode","send","Error"],"mappings":"AAAA;;;;;;AAEA;;;;;;AAEA,SAASA,cAAT,CAAwBC,GAAxB,EAA6BC,GAA7B,EAAkCC,GAAlC,EAAuCC,IAAvC,EAA6C;AAC3C,MAAIH,GAAJ,EAAS;AACP,QAAIA,IAAII,MAAR,EAAgB;AACdC,cAAQC,GAAR,CAAY,wBAAZ,EAAsCN,IAAIO,KAA1C;AACA;AACA;AACD;;AAED;AACA,QAAIP,IAAIQ,WAAJ,CAAgBC,IAAhB,KAAyB,mBAA7B,EAAkD;AAChDJ,cAAQC,GAAR,CAAY,mCAAZ;AACAN,YAAM,uBAAa,uBAAb,EAAsC,eAAtC,EAAuD,eAAvD,EAAwE,GAAxE,CAAN;AACD;;AAED;AACA,QAAIA,iCAAJ,EAA6B;AAC3BE,UAAIQ,MAAJ,CAAWV,IAAIW,UAAf,EAA2BC,IAA3B,CAAgCZ,GAAhC;AACD,KAFD,MAEM,IAAIA,eAAea,KAAnB,EAA0B;AAC9BR,cAAQC,GAAR,CAAY,wBAAZ,EAAsCN,GAAtC;AACAE,UAAIQ,MAAJ,CAAW,GAAX,EAAgBE,IAAhB,CAAqB,uBAArB;AACD;AACF;AACDT;AACD;;kBAEcJ,c","file":"mwErrorHandler.js","sourcesContent":["\"use strict\";\n\nimport ApiError from \"../util/apiError\";\n\nfunction mwErrorHandler(err, req, res, next) {\n  if (err) {\n    if (err.domain) {\n      console.log(\"Something Bad Happened\", err.stack);\n      // you should think about gracefully stopping & respawning your server\n      // since an unhandled error might put your application into an unknown state\n    }\n\n    /* eslint-disable */\n    if (err.constructor.name === \"UnauthorizedError\") {\n      console.log(\"=======Invalid token============>\");\n      err = new ApiError(\"Internal Server Error\", \"Invalid token\", \"Invalid token\", 401);\n    }\n\n    /* eslint-enable */\n    if (err instanceof ApiError) {\n      res.status(err.statusCode).send(err);\n    }else if (err instanceof Error) {\n      console.log(\"Internal server error \", err);\n      res.status(500).send(\"Internal Server Error\");\n    }\n  }\n  next();\n}\n\nexport default mwErrorHandler;\n"]}